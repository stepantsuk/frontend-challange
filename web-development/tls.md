# TLS

**Transport Layer Security**- это протокол используемый приложениями для организации защищенной передачи по сети, предотвращения взломов и прослушивания электронной почты, веб-страниц, сообщений и других протоколов. 

**Функции:**
- аутентификация - проверка, что установлено соединение между нужными адресатами;
- шифрование - защита доступа к данным от посторонних;
- целостность - защита информации от повреждений или подмены.

TLS это эволюция протокола SSL(Secure Sockets Layer).
TLS и SSL являются клиент-серверными протоколами, которые обеспечивают конфиденциальность связи с помощью криптографии для обеспечения безопасности в сети.
Когда клиент и сервер обмениваются данными с помощью этого протокола, то третья сторона не может подслушать или подделать какое-либо сообщение.

Для работы по протоколу TLS современные браузеры требуют предоставление действующего цифрового сертификата.

_Цифровой сертификат_ - это файл данных, который привязывает известный открытый криптографический ключ к организации.
Или
_Цифровой сертификат_ - это электронный документ, который подтверждает принадлежность открытого криптографического ключа конкретной организации. 

**Цифровой сертификат содержит** информацию об организации:
- имя (example.com),
- подразделение организации (Example Corp.),
- местоположение.

Цифровые сертификаты, подписанные доверенными центрами сертификации, обеспечивают безопасное установление TLS-соединение и защищают от атак "челоек посредине". Именно наличие такого сертификата позволяет браузерам показывать значок "замочка" для защищенных сайтов.

**Симметричное шифрование** - использование одного и того же ключа в рамкаш шифрования и дешифрования. Для него требуется обмен этим ключом между К/С, в процессе которого ключ могут перехватить.

**Ассиметричное шифрование** - используются два ключа, публичный для шифрования, приватный для дешифрования. Этот способ более медленный чем симметричное шифрование.

Ассиметричное шифрование применяется во время рукопожатия, то есть в начале сессии для обмена ключами и аутентификации.

В TLS для проверки целостности сообщений используется хеширование.

**Хеширование** - это преобразование массива данных в строку фиксированной длины. Изменение хоть одного символа влечет изменение хеша. Вместе с сообщением отправляется хеш функция, и отправитель и получатель пользуются одной и той же хеш функцией (которая происходит на стадии рукопожатия)

TLS - это два протокола, протокол рукопожатия (handshake protocol) и протокол записи (record protocol).

**Этапы исполнения протокола рукопожатия**:
- Приветствие. К/С обмениваются сообщениями в которых представляются друг другу и договариваются какими алгоритмами шифрования будут пользоваться при передаче данных.
- Обмен ключами. К/С убеждаются в подлинности друг друга и выполняют обмен ключами для дальнейшего использования при шифровании данных.
- Завершение рукопожатия. К/С подтверждают, что установка соединения прошла успешно и они готовы к защищенной передачи данных.

**Этапы исполнения протокола записи**:
- Фрагментация. Данные разбиваются на фрагменты меньшего размера для последующего шифрования.
- Компрессия. Данные сжимаются, их объем уменьшается. 
- Шифрование. Фрагменты данных шифруются по выбранному алгоритму шифрования, использующему общий секретный ключ, установленный на этапе рукопожатия.
- Аутентификация. Каждый фрагмент данных подписывается цифровой подписью или кодом аутентификации, чтобы соблюсти целостность и подлинность данных.
- Передача данных. Зашифрованные и аутентифицированные фрагменты данных передаются по Сети между клиентом и сервером.

**Атака типа man-in-the-middle** - одна из частых угроз безопасности в сетевых коммуникациях. Так называют ситуацию, когда злоумышленник внедряется в коммуникационный канал между клиентом и сервером, перехватывает и модифицирует передаваемые данные.

**Механизмы защиты**.
- Шифрование. Данные не пригодны для прослушивания и изменения.
- Аутентификация сервера. Клиент за счет сертификата сервера проверяет его подлинность и убеждается в том, что связь установлена с нужным сервером, а не посредником.
- Аутентификация клиента. Аналогично, но более редкий случай, сервер проверяет клиента
- Обмен ключами по протоколу Диффи-Хеллмана. К и С согласуют общий секретный ключ по этому протоколу.
- Цифровая подпись. Она используется для проверки подлинности и целостности передаваемых данных, т.е. гарантируется, что данные не были изменены.




