# **События. Всплытие и погружение**

При наступлении события – самый глубоко вложенный элемент, на котором оно произошло, помечается как «целевой» (event.target).

- Фаза погружения (capturing phase) - событие сначала двигается вниз от корня документа к event.target, по пути вызывая обработчики, поставленные через addEventListener(...., true), где true – это сокращение для {capture: true}.
- Фаза цели (target phase) - обработчики вызываются на целевом элементе.
- Фаза всплытия (bubbling stage) - событие двигается от event.target вверх к корню документа, по пути вызывая обработчики, поставленные через on<event> и addEventListener без третьего аргумента или с третьим аргументом равным false.

---

Каждый обработчик имеет доступ к свойствам события event:

event.target – самый глубокий элемент, на котором произошло событие.
event.currentTarget (=this) – элемент, на котором в данный момент сработал обработчик (тот, на котором «висит» конкретный обработчик)
event.eventPhase – на какой фазе он сработал (погружение=1, фаза цели=2, всплытие=3).

Обработчики, добавленные через on<event>-свойство или через HTML-атрибуты, или через addEventListener(event, handler) с двумя аргументами, ничего не знают о фазе погружения, а работают только на 2-ой и 3-ей фазах.

---

**Всплытие** - Когда на элементе происходит событие, обработчики сначала срабатывают на нём, потом на его родителе, затем выше и так далее, вверх по цепочке предков.

Всплытие идёт с «целевого» элемента прямо наверх. По умолчанию событие будет всплывать до элемента <html>, а затем до объекта document, а иногда даже до window, вызывая все обработчики на своём пути.

_Почти_ все события всплывают. Например, событие focus не всплывает.

event.target - это «целевой» элемент, на котором произошло событие, в процессе всплытия он неизменен

event.currentTarget - это «текущий» элемент, до которого дошло всплытие, на нём сейчас выполняется обработчик

event.stopPropagation() - препятствует продвижению события дальше, но на текущем элементе все обработчики будут вызваны.

stopImmediatePropagation() - не только предотвращает всплытие, но и останавливает обработку событий на текущем элементе.

---
